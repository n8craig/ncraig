<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nathan Craig">
<meta name="dcterms.date" content="2022-03-13">
<meta name="description" content="Reporting values inline is one of the strong suits of R Markdown. Using lists can make storing variables more organized, and with the right functions lists can be generated automatically. This makes writing with inline values in R Markdown easier.">

<title>N.Craig - Lists and Inline Reporting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">N.Craig</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="https://n8craig.github.io/inspections/">
 <span class="dropdown-text">ICE Inspections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../posts/2021-06-30-current-ice-detention-population/">
 <span class="dropdown-text">Current ICE Detention</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://n8craig.github.io/nmsu-grades/index.html">
 <span class="dropdown-text">Canvas and R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://nmc.quarto.pub/um-environmental-data/">
 <span class="dropdown-text">Museum Environmental Monitoring</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-problems" id="toc-the-problems" class="nav-link" data-scroll-target="#the-problems">The Problems</a></li>
  <li><a href="#organizing-summary-variables-in-a-list" id="toc-organizing-summary-variables-in-a-list" class="nav-link" data-scroll-target="#organizing-summary-variables-in-a-list">Organizing Summary Variables in a List</a>
  <ul class="collapse">
  <li><a href="#manual-approach" id="toc-manual-approach" class="nav-link" data-scroll-target="#manual-approach">Manual Approach</a></li>
  <li><a href="#automated-lists-of-summary-stats-shwing" id="toc-automated-lists-of-summary-stats-shwing" class="nav-link" data-scroll-target="#automated-lists-of-summary-stats-shwing">Automated Lists of Summary Stats (<em>shwing!</em>)</a></li>
  <li><a href="#adding-items-to-lists" id="toc-adding-items-to-lists" class="nav-link" data-scroll-target="#adding-items-to-lists">Adding Items to Lists</a></li>
  </ul></li>
  <li><a href="#extending-the-idea-beyond-inline-values-maybe" id="toc-extending-the-idea-beyond-inline-values-maybe" class="nav-link" data-scroll-target="#extending-the-idea-beyond-inline-values-maybe">Extending the Idea Beyond Inline Values (maybe?)</a>
  <ul class="collapse">
  <li><a href="#but-im-used-to-assigning-data-frames-to-individual-variables" id="toc-but-im-used-to-assigning-data-frames-to-individual-variables" class="nav-link" data-scroll-target="#but-im-used-to-assigning-data-frames-to-individual-variables">But I’m Used to Assigning Data Frames to Individual Variables</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lists and Inline Reporting</h1>
  <div class="quarto-categories">
    <div class="quarto-category">how-to</div>
    <div class="quarto-category">R Markdown</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Reporting values inline is one of the strong suits of R Markdown. Using lists can make storing variables more organized, and with the right functions lists can be generated automatically. This makes writing with inline values in R Markdown easier.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nathan Craig </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 13, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>With great interest I read Tristan Mahr’s <a href="https://www.tjmahr.com/lists-knitr-secret-weapon/">post</a> on lists as a secret weapon for reporting values inline using R Markdown with <code>knitr</code>. I find the ability to report values inline is one of R Markdown’s strengths. Adopting Tristan’s approach to using lists for reporting inline has helped improve my craft so I’m writing up my take on what I found useful.</p>
</section>
<section id="the-problems" class="level1 page-columns page-full">
<h1>The Problems</h1>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="https://i.imgur.com/PBYZDYM.png" class="img-fluid"></p>
</div></div></div>
<p>When working on longer documents, ones with several sections or chapters, I wind up with a very full (i.e.&nbsp;cluttered) R environment. When things get complicated, I like having analysis in a separate document. Then results are loaded into memory. That way I have access to all of the values and tables for the project regardless of what file I have open. In such a situation, there might be 10-15 data frames, each representing specific aspects of analysis. Particularly if I’m wanting to report inline values in the text (which is a big part of the point of using R Markdown), I often wind up with easily 30 variables. Naming all these things is <a href="https://style.tidyverse.org">tricky</a>.</p>
<p>In an effort to make writing easier, I try to name things very carefully using names that go from general to specific. The aim of this is to have names that will group together so that they: sort together in the Environment tab of R Studio, and can be accessed with auto-completion.</p>
<p>Doing things this way, the variable names can get very long. Often projects start to feel both brittle and clumsy as they get larger and larger; keeping track of things starts to get difficult. Finding a better way of grouping variables, so that they are associated and easy to call, and so they are created with less code, seems really useful— not only for reporting values inline— but generally. Tristan’s approach to using lists can address some of both issues of writing thrifty code and organizing with lists simultaneously. Turns out, using lists is just good R style.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you find yourself attempting to cram data into variable names (e.g.&nbsp;model_2018, model_2019, model_2020), consider using a list or data frame instead. — <em>The <a href="https://style.tidyverse.org/syntax.html#object-names">Tidyverse Style Guide</a></em></p>
</div>
</div>
</section>
<section id="organizing-summary-variables-in-a-list" class="level1 page-columns page-full">
<h1>Organizing Summary Variables in a List</h1>
<section id="manual-approach" class="level2">
<h2 class="anchored" data-anchor-id="manual-approach">Manual Approach</h2>
<p>A list can be created manually and the list items named.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">length</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min =</span> <span class="fu">min</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">max =</span> <span class="fu">max</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">mean</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">sd</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="fu">mode</span>(mtcars<span class="sc">$</span>wt)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ n   : int 32
 $ min : num 1.51
 $ max : num 5.42
 $ mean: num 3.22
 $ sd  : num 0.978
 $ mode: chr "numeric"</code></pre>
</div>
</div>
<p>Now the values are associated with weight, contained in the weight list, can be accessed with the <code>$</code>, and are readable in the Markdown source. For example, the mean weight of vehicles in <code>mtcars</code> is 3.2 (SD = 0.98). To me, this is better than having variables like <code>weight_mean</code> and <code>weight_sd</code>, which is what I was doing. Now both values are listed under <code>weight</code>. This is an improvement, but it gets better.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both <code>[[</code> and <code>$</code> select a single element of the list. The main difference is that <code>$</code> does not allow computed indices, whereas <code>[[</code> does. <code>x$name</code> is equivalent to <code>x[["name", exact = FALSE]]</code>. Also, the partial matching behavior of <code>[[</code> can be controlled using the exact argument. — <em>Base R <a href="https://rdrr.io/r/base/Extract.html">Documentation</a></em></p>
</div>
</div>
<p><strong>Written</strong>:</p>
<ul>
<li>Mean =<code>`r format(weight$mean, digits = 2)`</code></li>
<li>SD =<code>`r format(weight$sd, digits =2)`</code></li>
</ul>
</section>
<section id="automated-lists-of-summary-stats-shwing" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="automated-lists-of-summary-stats-shwing">Automated Lists of Summary Stats (<em>shwing!</em>)</h2>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="https://i.imgflip.com/68k0lg.jpg" class="img-fluid"></p>
</div></div></div>
<p>The really exciting thing about using lists is making them automatically with existing functions. Here a list of several summary values is created using the <code>psych</code> package. One could do something similar with <code>summary</code> or <code>fivenum</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>weight2 <span class="ot">&lt;-</span> <span class="fu">as.list</span>(psych<span class="sc">::</span><span class="fu">describe</span>(mtcars<span class="sc">$</span>wt))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(weight2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 13
 $ vars    : num 1
 $ n       : num 32
 $ mean    : num 3.22
 $ sd      : num 0.978
 $ median  : num 3.33
 $ trimmed : num 3.15
 $ mad     : num 0.767
 $ min     : num 1.51
 $ max     : num 5.42
 $ range   : num 3.91
 $ skew    : num 0.423
 $ kurtosis: num -0.0227
 $ se      : num 0.173</code></pre>
</div>
</div>
<p>With far less code, it was possible to generate all of the same summary attributes along with additional ones like skew (0.42) and range (3.9). Normally, <code>describe()</code> returns a data frame, but it can be coerced to a list.</p>
<p><strong>Written</strong>:</p>
<ul>
<li><code>`r format(weight2$skew, digits = 2)`</code></li>
<li><code>`r format(weight2$range, digits = 2)`</code></li>
</ul>
</section>
<section id="adding-items-to-lists" class="level2">
<h2 class="anchored" data-anchor-id="adding-items-to-lists">Adding Items to Lists</h2>
<p>Lists can be appended, which is really handy. Lists can also contain lots of different kinds of things: lists, lists of lists, and data frames. Lists are very flexible containers. Here, We run a Shapiro-Wilk normality test, identify the number of outliers, their row names, along with a data frame of outliers, and add all of these to the list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>weight2 <span class="ot">&lt;-</span> <span class="fu">append</span>(weight2,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">list</span>(<span class="at">s_test =</span> <span class="fu">shapiro.test</span>(mtcars<span class="sc">$</span>wt),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">outliers_n =</span> <span class="fu">nrow</span>(rstatix<span class="sc">::</span><span class="fu">identify_outliers</span>(mtcars, wt)),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">outliers =</span> <span class="fu">row.names</span>(rstatix<span class="sc">::</span><span class="fu">identify_outliers</span>(mtcars, wt)),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">outliers_df =</span> rstatix<span class="sc">::</span><span class="fu">identify_outliers</span>(mtcars, wt)))</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(weight2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 17
 $ vars       : num 1
 $ n          : num 32
 $ mean       : num 3.22
 $ sd         : num 0.978
 $ median     : num 3.33
 $ trimmed    : num 3.15
 $ mad        : num 0.767
 $ min        : num 1.51
 $ max        : num 5.42
 $ range      : num 3.91
 $ skew       : num 0.423
 $ kurtosis   : num -0.0227
 $ se         : num 0.173
 $ s_test     :List of 4
  ..$ statistic: Named num 0.943
  .. ..- attr(*, "names")= chr "W"
  ..$ p.value  : num 0.0927
  ..$ method   : chr "Shapiro-Wilk normality test"
  ..$ data.name: chr "mtcars$wt"
  ..- attr(*, "class")= chr "htest"
 $ outliers_n : int 3
 $ outliers   : chr [1:3] "Cadillac Fleetwood" "Lincoln Continental" "Chrysler Imperial"
 $ outliers_df:'data.frame':    3 obs. of  13 variables:
  ..$ mpg       : num [1:3] 10.4 10.4 14.7
  ..$ cyl       : num [1:3] 8 8 8
  ..$ disp      : num [1:3] 472 460 440
  ..$ hp        : num [1:3] 205 215 230
  ..$ drat      : num [1:3] 2.93 3 3.23
  ..$ wt        : num [1:3] 5.25 5.42 5.34
  ..$ qsec      : num [1:3] 18 17.8 17.4
  ..$ vs        : num [1:3] 0 0 0
  ..$ am        : num [1:3] 0 0 0
  ..$ gear      : num [1:3] 3 3 3
  ..$ carb      : num [1:3] 4 4 4
  ..$ is.outlier: logi [1:3] TRUE TRUE TRUE
  ..$ is.extreme: logi [1:3] FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Now using this same list, which is still a single (compound) object in the environment we have many kinds of handy information about the variable, like everything needed to report a Shapiro test (W = 0.94, p=0.093), or note that there are 3 outliers in this variable. They are: Cadillac Fleetwood, Lincoln Continental, and Chrysler Imperial.</p>
<p><strong>Written</strong>:</p>
<ul>
<li>W = <code>`r format(weight2$s_test$statistic, digits = 2)`</code></li>
<li>p=<code>`r scales::pvalue(weight2$s_test$p.value)`</code></li>
<li><code>`r weight2$outliers_n`</code></li>
<li><code>`r knitr::combine_words(weight2$outliers)`</code></li>
</ul>
<p>With relatively few lines of code, everything is tucked away nice and neatly in a single list. Each of the list objects can be accessed using the <code>$</code> in a nested way.</p>
<p>Unfortunately, I can’t get the <code>tab</code> completion to work properly when writing inline, but a <code>ctrl + 2</code> gets me to the console where the statement can be built, checked, and copied back into the editor window if the console is being glitchy.</p>
</section>
</section>
<section id="extending-the-idea-beyond-inline-values-maybe" class="level1 page-columns page-full">
<h1>Extending the Idea Beyond Inline Values (maybe?)</h1>
<p>Tristan’s examples involved reporting linear mixed models, and he used the <code>split()</code> function in some interesting ways. I haven’t dug into that just yet, but I’m wondering about keeping related data frames in a list as another approach to simplifying both the environment and variable naming.</p>
<p>There are some <a href="https://stackoverflow.com/a/24376207/13110995">compelling reasons</a> to keep data frames in lists.</p>
<p>Continuing to work with the same list on weight, one might want to group by cylinders and then get the mean weight of the group. This involves making another data frame, one that would occupy another spot in the environment. Rather than assigning it to a variable, it can be added to a list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>weight2 <span class="ot">&lt;-</span> <span class="fu">append</span>(weight2, <span class="fu">list</span>(<span class="at">df_mean_wt_by_cyl =</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">mean_wt =</span> <span class="fu">mean</span>(wt),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">sd_wt =</span> <span class="fu">sd</span>(wt))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="https://i.imgur.com/AnTZEMv.png" class="img-fluid"></p>
</div></div></div>
<p>Now that summary table is created, but within the list, and it can be called in a code chunk just like any other variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(weight2<span class="sc">$</span>df_mean_wt_by_cyl,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"A deeply insightful look at weight by cylinder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>A deeply insightful look at weight by cylinder</caption>
<thead>
<tr class="header">
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">mean_wt</th>
<th style="text-align: right;">sd_wt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">2.285727</td>
<td style="text-align: right;">0.5695637</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">3.117143</td>
<td style="text-align: right;">0.3563455</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">3.999214</td>
<td style="text-align: right;">0.7594047</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="but-im-used-to-assigning-data-frames-to-individual-variables" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="but-im-used-to-assigning-data-frames-to-individual-variables">But I’m Used to Assigning Data Frames to Individual Variables</h2>
<p>I’m accustomed to assigning data frames to variables, so putting them into lists is new to me. I generally do something like the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">group =</span> stringi<span class="sc">::</span><span class="fu">stri_rand_strings</span>(<span class="dv">100</span>, <span class="dv">1</span>, <span class="at">pattern =</span> <span class="st">"[A-E]"</span>),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">val =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(val),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(val))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These could be manually placed in a list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>(df1, df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That is useful, and just required one additional line to add to a list. However, we are still making items in the environment, and if we wanted a clean environment then we would need to remove the temporary items. It would be better to create the objects directly into a list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">remove</span>(df1,df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fortunately, making items directly into a list is nearly identical to assigning them to an unlisted variable.</p>
<p>Rather than assigning each new data frame to its own stand alone variable, place it in the list with the <code>$</code> character (or <code>[[]]</code>). If some of the data frames are dependent or built from another, those data can be accessed using the <code>$</code>.</p>
<p>Note that the first step is to create an empty list, because we cannot add items to a list that does not exist. Below we create an empty list and create the new data frames directly into it. The data frames aren’t added to the environment and don’t need to be removed.</p>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="https://i.imgflip.com/68je63.jpg" class="img-fluid"></p>
</div></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mylist <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mylist<span class="sc">$</span>df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">group =</span> stringi<span class="sc">::</span><span class="fu">stri_rand_strings</span>(<span class="dv">100</span>, <span class="dv">1</span>, <span class="at">pattern =</span> <span class="st">"[A-E]"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">val =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>mylist<span class="sc">$</span>df2 <span class="ot">&lt;-</span> mylist<span class="sc">$</span>df1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(val),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(val))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.1.3 (2022-03-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] dplyr_1.0.8

loaded via a namespace (and not attached):
 [1] highr_0.9         pillar_1.7.0      compiler_4.1.3    tools_4.1.3      
 [5] digest_0.6.29     nlme_3.1-155      jsonlite_1.8.0    evaluate_0.15    
 [9] lifecycle_1.0.1   tibble_3.1.6      lattice_0.20-45   pkgconfig_2.0.3  
[13] rlang_1.0.2       psych_2.2.3       cli_3.2.0         DBI_1.1.2        
[17] rstudioapi_0.13   yaml_2.3.5        parallel_4.1.3    xfun_0.30        
[21] fastmap_1.1.0     stringr_1.4.0     knitr_1.38        generics_0.1.2   
[25] vctrs_0.4.1       htmlwidgets_1.5.4 grid_4.1.3        tidyselect_1.1.2 
[29] glue_1.6.2        R6_2.5.1          rstatix_0.7.0     fansi_1.0.3      
[33] rmarkdown_2.13    carData_3.0-5     car_3.0-12        tidyr_1.2.0      
[37] purrr_0.3.4       magrittr_2.0.3    scales_1.2.0      backports_1.4.1  
[41] ellipsis_0.3.2    htmltools_0.5.2   abind_1.4-5       assertthat_0.2.1 
[45] mnormt_2.0.2      colorspace_2.0-3  utf8_1.2.2        stringi_1.7.6    
[49] munsell_0.5.0     broom_0.7.12      tmvnsim_1.0-2     crayon_1.5.1     </code></pre>
</div>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{craig2022,
  author = {Nathan Craig},
  title = {Lists and {Inline} {Reporting}},
  date = {2022-03-13},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-craig2022" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Nathan Craig. 2022. <span>“Lists and Inline Reporting.”</span> March 13,
2022.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>